<div class="movie-details-container" *ngIf="!loading && !error && movie" @fadeIn>
  <div class="movie-header">
    <div class="movie-poster">
      <img [src]="movie.large_cover_image || movie.medium_cover_image" [alt]="movie.title + ' poster'" class="movie-poster-img">
    </div>
    <div class="movie-info">
      <h1 class="movie-title">{{ movie.title }} ({{ movie.year }})</h1>
      
      <div class="movie-rating" *ngIf="movie.rating">
        <span class="rating-value">{{ movie.rating }}/10</span>
        <div class="rating-stars">
          <span *ngFor="let star of [1,2,3,4,5]" 
                [class.filled]="star <= (movie.rating / 2)">
            â˜…
          </span>
        </div>
      </div>

      <div class="movie-genres" *ngIf="movie.genres && movie.genres.length > 0">
        <span class="genre-tag" *ngFor="let genre of movie.genres">{{ genre }}</span>
      </div>
    </div>
  </div>

  <div class="movie-content">
    <div class="movie-description" *ngIf="movie.description_full">
      <h2>Synopsis</h2>
      <p>{{ movie.description_full }}</p>
    </div>

    <div class="movie-trailer" *ngIf="movie.yt_trailer_code">
      <h2>Trailer</h2>
      <div class="trailer-container">
        <iframe 
          width="100%" 
          height="500" 
          [src]="getTrailerUrl(movie.yt_trailer_code) | safeUrl: 'resourceUrl'" 
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
          allowfullscreen>
        </iframe>
      </div>
    </div>
  </div>
</div>

<div class="loading-spinner" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading movie details...</p>
</div>

<div class="error-message" *ngIf="error && !loading">
  <p>{{ error }}</p>
  <button class="back-button" (click)="goBack()">Go Back</button>
</div>
